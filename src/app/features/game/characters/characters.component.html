<div class="characters-page-wrapper">
  <div class="harmonic-streams">
    <div class="stream stream1"></div>
    <div class="stream stream2"></div>
  </div>

  <div class="hud-element hud-top-left">
    <div class="hud-data">ARQUIVO DE PERSONAGENS</div>
    <div class="hud-data">NÍVEL ACESSO: TRANSCENDENTE</div>
  </div>
  <div class="hud-element hud-top-right">
    <div class="hud-data">NEXUS.GALACTIC.ARCHIVE</div>
    <div class="hud-data">TEMPO CÓSMICO: ∞</div>
  </div>
  <div class="hud-element hud-bottom-left">
    <div class="hud-data">DECODIFICAÇÃO: 100%</div>
    <div class="hud-data">RESSONÂNCIA QUÂNTICA: ESTÁVEL</div>
  </div>
  <div class="hud-element hud-bottom-right">
    <div class="hud-data">COORDENADAS: BRAÇO EXTERIOR</div>
    <div class="hud-data">SETOR: NEXUS-PRIME</div>
  </div>

  <div class="characters-container">
    <div class="corner-decoration corner-tl"></div>
    <div class="corner-decoration corner-tr"></div>
    <div class="corner-decoration corner-bl"></div>
    <div class="corner-decoration corner-br"></div>

    <div class="characters-header">
      <h1 class="characters-title">SEUS PERSONAGENS</h1>
      <p class="characters-subtitle">Heróis do Nexus Galáctico</p>
    </div>

    <div class="character-grid">
      <div class="character-card" *ngFor="let char of characters">
        <div class="status-indicators">
          <div class="status-dot online" title="Online"></div>
        </div>

        <div class="character-avatar">
          <div class="avatar-frame"></div>
          <div class="class-icon-display">
            <img [src]="char.class_icon" alt="Ícone da Classe" class="icon-image">
          </div>
          <div class="race-icon-display">
            <img [src]="char.race_icon" alt="Ícone da Raça" class="icon-image">
          </div>
        </div>

        <div class="character-info">
          <h3 class="character-name">{{ char.name }}</h3>
          <p class="character-class">{{ char.char_class }}</p>
          <p class="character-level">
            Nível <span class="level-badge">{{ char.level }}</span>
          </p>
          <div class="experience-bar">
            <div class="exp-fill" [style.width.%]="char.expPercentage"></div>
          </div>
        </div>

        <div class="character-stats">
          <div class="stat">
            <div class="stat-label">For</div>
            <div class="stat-value">{{ char.attributes.strength }}</div>
          </div>
          <div class="stat">
            <div class="stat-label">Int</div>
            <div class="stat-value">{{ char.attributes.intelligence }}</div>
          </div>
          <div class="stat">
            <div class="stat-label">Des</div>
            <div class="stat-value">{{ char.attributes.dexterity }}</div>
          </div>
        </div>

        <div class="character-actions">
          <button class="action-btn" (click)="showDetails(char)">Detalhes</button>
          <button class="action-btn primary" [routerLink]="['/game/worlds', char.id]">Jogar</button>
        </div>
      </div>

      <div class="character-card create-character-card" routerLink="/game/character-create">
        <div class="create-icon">+</div>
        <div class="create-text">Criar Personagem</div>
      </div>
    </div>
  </div>

  <div class="modal-backdrop" *ngIf="isModalVisible" (click)="closeModal()"></div>
  <div class="modal-container" *ngIf="isModalVisible">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">{{ selectedCharacter?.name }}</h2>
      </div>

      <div class="modal-scrollable-content">
        <div class="modal-main-content">
          <div class="character-stats-section">
            <h3 class="section-title">Atributos do Personagem</h3>
            <div class="stat-row">
              <span class="stat-label">Raça:</span>
              <span class="stat-value">
                {{ selectedCharacter?.race }}
                <img *ngIf="selectedCharacter?.race_icon" [src]="selectedCharacter?.race_icon" alt="Ícone da Raça"
                  class="modal-icon">
              </span>
            </div>
            <div class="stat-row">
              <span class="stat-label">Classe:</span>
              <span class="stat-value">
                {{ selectedCharacter?.char_class }}
                <img *ngIf="selectedCharacter?.class_icon" [src]="selectedCharacter?.class_icon" alt="Ícone da Classe"
                  class="modal-icon">
              </span>
            </div>
            <div class="stat-row">
              <span class="stat-label">Força:</span>
              <span class="stat-value">{{ selectedCharacter?.attributes?.strength }}</span>
            </div>
            <div class="stat-row">
              <span class="stat-label">Inteligência:</span>
              <span class="stat-value">{{ selectedCharacter?.attributes?.intelligence }}</span>
            </div>
            <div class="stat-row">
              <span class="stat-label">Carisma:</span>
              <span class="stat-value">{{ selectedCharacter?.attributes?.charisma }}</span>
            </div>
            <div class="stat-row">
              <span class="stat-label">Destreza:</span>
              <span class="stat-value">{{ selectedCharacter?.attributes?.dexterity }}</span>
            </div>
            <div class="stat-row">
              <span class="stat-label">Intuição:</span>
              <span class="stat-value">{{ selectedCharacter?.attributes?.intuition }}</span>
            </div>
          </div>

          <div class="inventory-section">
            <h3 class="section-title">Inventário</h3>
            <div class="inventory-grid">
              <div class="inventory-slot">
                <span class="item-icon item-rarity-legendary">⚔️</span>
                <span class="item-quantity">1</span>
              </div>
              <div class="inventory-slot empty"></div>
              <div class="inventory-slot empty"></div>
              <div class="inventory-slot empty"></div>
              <div class="inventory-slot empty"></div>
              <div class="inventory-slot empty"></div>
              <div class="inventory-slot empty"></div>
              <div class="inventory-slot empty"></div>
              <div class="inventory-slot empty"></div>
            </div>
          </div>
        </div>

        <div class="description-section">
          <h3 class="section-title">Descrição</h3>
          <p class="description-text">
            {{ selectedCharacter?.description }}
          </p>
        </div>
      </div>

      <div class="modal-footer">
        <button class="action-btn" (click)="closeModal()">Fechar</button>
        <button class="action-btn action-btn-danger" (click)="deleteCharacter()">Excluir</button>
      </div>
    </div>
  </div>

</div>